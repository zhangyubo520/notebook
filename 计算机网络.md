# 计算机网络

### 1、tcp三次握手四次挥手

```
1、状态罗列
LISTEN - 侦听来自远方TCP端口的连接请求；listen

SYN-SENT -在发送连接请求后等待匹配的连接请求；syn-sent

SYN-RECEIVED - 在收到和发送一个连接请求后等待对连接请求的确认；syn-received

ESTABLISHED- 代表一个打开的连接，数据可以传送给用户；established

FIN-WAIT-1 - 等待远程TCP的连接中断请求，或先前的连接中断请求的确认；fin-wait-1

FIN-WAIT-2 - 从远程TCP等待连接中断请求；fin-wait-2

CLOSE-WAIT - 等待从本地用户发来的连接中断请求；close-wait

CLOSING -等待远程TCP对连接中断的确认；closing

LAST-ACK - 等待原来发向远程TCP的连接中断请求的确认；last-ack

TIME-WAIT -等待足够的时间以确保远程TCP接收到连接中断请求的确认；time-wait

CLOSED - 没有任何连接状态；closed

2、3次挥手
第一次握手：客户端主动打开tcp状态由closed转为syn-sent,发送SYN=1，seq=x给服务端请求连接,服务器端被动打开tcp，状态由listen转为syn-received

第二次握手：服务器端接受到连接请求后，发送SYN=1,ACK=1,ack=x+1,seq=y给客户端，自己状态变为established

第三次握手：客户端接受到服务器的同意请求后，发送ACK=1,ack=y+1，seq=x+1给服务器端,自己状态变为established,服务端接受到ack后连接就建立了，可以互发消息了

3、四次挥手
第一次挥手：客户端发送FIN=1,seq=v给服务器端请求终止连接，客户端一端关闭连接

第二次挥手：服务器接到中断请求后，发送ACK=1,ack=v+1,seq=u给客户端，确认断连接

第三次挥手：服务器发送FIN=1,ACK=1,ack=v+1,seq=w给客户端，同意断开连接

第四次挥手：客户端发送：ACK=1,ack=w+1,seq=v+1，等两个报文时间处于closed状态，服务端接收到后就自己处于closed状态
```

### 2、输入网址发生什么

```
1、例如：输入www.baidu.com，www是主机，baidu是域名，com是类型，后面把网址解析为ip地址

2、DNS查询，将域名转换成对应的ip地址

3、发送请求到服务器

4、重定向

5、服务器处理http请求

6、服务器返回http响应

7、浏览器请求样式及图片文件，渲染界面给用户

8、浏览器通过Ajax
```

### 3、TCP与UDP

```
tcp:可靠，稳定, 会有三次握手来建立连接，而且在数据传递时，有确认、窗口、重传、拥塞控制机制，在数据传完后，还会断开连接用来节约系统资源。 TCP的缺点： 慢，效率低，占用系统资源高，易被攻击 TCP在传递数据之前，要先建连接，这会消耗时间，而且在数据传递时，确认机制、重传机制、拥塞控制机制等都会消耗大量的时间，而且要在每台设备上维护所有的传输连接，事实上，每个连接都会占用系统的CPU、内存等硬件资源。 而且，因为TCP有确认机制、三次握手机制，这些也导致TCP容易被人利用。

udp: 快,UDP是一个无状态的传输协议,比如长视频，要求速率, QQ语音 QQ视频
1.基于连接与无连接；
2.对系统资源的要求（TCP较多，UDP少）；
3.UDP程序结构较简单；
4.流模式与数据报模式 ；
5.TCP保证数据正确性，UDP可能丢包，TCP保证数据顺序，UDP不保证
```

### 4、